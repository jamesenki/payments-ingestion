# Payment Data Simulator Configuration
# This file configures the behavior of the payment transaction data simulator

simulator:
  # Output Configuration
  output:
    destination: "event_hub"  # event_hub, file, stdout
    batch_size: 100
    rate_limit: 1000  # events per second
    connection_string: "${EVENTHUB_CONNECTION_STRING}"  # Use environment variable
  
  # Transaction Volume
  transaction:
    volume:
      total: 10000  # Total transactions to generate
      rate: 100     # Transactions per second
      duration: null  # Duration in seconds (overrides total if set)
    
    # Variability Configuration
    variability:
      # Amount Distribution
      amounts:
        distribution: "normal"  # normal, uniform, exponential, bimodal
        mean: 100.00
        std_dev: 50.00
        min: 1.00
        max: 10000.00
        bimodal_peaks: [25.00, 300.00]  # For bimodal distribution
      
      # Payment Method Distribution (must sum to 1.0)
      payment_methods:
        credit_card: 0.50
        debit_card: 0.30
        bank_transfer: 0.10
        digital_wallet: 0.05
        cryptocurrency: 0.03
        cash_equivalent: 0.02
      
      # Payment Status Distribution (must sum to 1.0)
      payment_status:
        completed: 0.85
        failed: 0.10
        pending: 0.03
        cancelled: 0.01
        refunded: 0.01
      
      # Currency Distribution (must sum to 1.0)
      currencies:
        USD: 0.60
        EUR: 0.20
        GBP: 0.10
        JPY: 0.05
        CAD: 0.03
        AUD: 0.02
      
      # Geographic Distribution (must sum to 1.0)
      countries:
        US: 0.50
        GB: 0.15
        CA: 0.10
        AU: 0.08
        DE: 0.05
        FR: 0.04
        JP: 0.03
        other: 0.05
      
      # Temporal Patterns
      temporal:
        business_hours: 0.70
        evening: 0.20
        night: 0.05
        weekend: 0.05
        timezone_distribution:
          UTC-5: 0.40
          UTC-8: 0.30
          UTC+0: 0.20
          UTC+9: 0.10
      
      # Merchant Categories (must sum to 1.0)
      merchant_categories:
        retail: 0.30
        food_beverage: 0.20
        travel: 0.15
        entertainment: 0.10
        healthcare: 0.08
        education: 0.07
        other: 0.10

# Compliance Violation Scenarios
compliance:
  enabled: true
  total_violation_percentage: 0.13  # 13% of transactions have violations
  
  scenarios:
    # Anti-Money Laundering (AML) Violations
    aml_violations:
      enabled: true
      percentage: 0.02  # 2% of all transactions
      patterns:
        structuring:
          enabled: true
          frequency: 0.01
          threshold: 10000.00
          transaction_count: 5
          time_window_minutes: 60
        large_amount:
          enabled: true
          frequency: 0.005
          min_amount: 50000.00
        rapid_fire:
          enabled: true
          frequency: 0.005
          transaction_count: 100
          time_window_seconds: 60
    
    # Know Your Customer (KYC) Violations
    kyc_violations:
      enabled: true
      percentage: 0.03  # 3% of all transactions
      patterns:
        missing_customer_id:
          enabled: true
          frequency: 0.01
        invalid_email:
          enabled: true
          frequency: 0.01
        missing_country:
          enabled: true
          frequency: 0.01
    
    # PCI DSS Violations
    pci_violations:
      enabled: true
      percentage: 0.01  # 1% of all transactions
      patterns:
        missing_card_data:
          enabled: true
          frequency: 0.005
        invalid_card_brand:
          enabled: true
          frequency: 0.005
    
    # Data Quality Violations
    data_quality_violations:
      enabled: true
      percentage: 0.05  # 5% of all transactions
      patterns:
        negative_amount:
          enabled: true
          frequency: 0.01
        zero_amount:
          enabled: true
          frequency: 0.01
        invalid_currency:
          enabled: true
          frequency: 0.01
        invalid_status:
          enabled: true
          frequency: 0.01
        future_timestamp:
          enabled: true
          frequency: 0.01
    
    # Business Rule Violations
    business_rule_violations:
      enabled: true
      percentage: 0.02  # 2% of all transactions
      patterns:
        status_mismatch:
          enabled: true
          frequency: 0.01
        orphan_refund:
          enabled: true
          frequency: 0.005
        currency_mismatch:
          enabled: true
          frequency: 0.005

# Metadata Generation
metadata:
  include_ip_address: true
  include_user_agent: true
  include_card_data: true
  include_risk_score: true
  include_fraud_indicators: true
  
  risk_score:
    distribution: "normal"
    mean: 0.3
    std_dev: 0.2
    min: 0.0
    max: 1.0
  
  fraud_indicators:
    enabled: true
    percentage: 0.05  # 5% have fraud indicators
    indicators:
      - "velocity_check_failed"
      - "device_fingerprint_mismatch"
      - "billing_address_mismatch"
      - "suspicious_ip_location"
      - "high_risk_country"

# Logging Configuration
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "json"  # json, text
  file: "simulator.log"
  include_metrics: true
  metrics_interval_seconds: 60

# Metrics Collection
metrics:
  enabled: true
  publish_interval_seconds: 60
  track:
    - transaction_count
    - publish_rate
    - error_rate
    - compliance_violations
    - distribution_breakdown

